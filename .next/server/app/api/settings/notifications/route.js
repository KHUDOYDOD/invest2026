"use strict";(()=>{var t={};t.id=682,t.ids=[682],t.modules={20399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:t=>{t.exports=import("pg")},95795:(t,e,s)=>{s.a(t,async(t,n)=>{try{s.r(e),s.d(e,{originalPathname:()=>_,patchFetch:()=>u,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var r=s(73278),i=s(45002),a=s(54877),o=s(31478),c=t([o]);o=(c.then?(await c)():c)[0];let p=new r.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/settings/notifications/route",pathname:"/api/settings/notifications",filename:"route",bundlePath:"app/api/settings/notifications/route"},resolvedPagePath:"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\api\\settings\\notifications\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:l,serverHooks:d}=p,_="/api/settings/notifications/route";function u(){return(0,a.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}n()}catch(t){n(t)}})},31478:(t,e,s)=>{s.a(t,async(t,n)=>{try{s.r(e),s.d(e,{GET:()=>o,PUT:()=>c});var r=s(71309),i=s(44819),a=t([i]);async function o(){try{let t=await (0,i.I)(`SELECT setting_key, setting_value, setting_type 
       FROM site_settings 
       WHERE category = 'notifications'`),e={};return t.rows.forEach(t=>{let s=t.setting_key,n=t.setting_value;"boolean"===t.setting_type?n="true"===n:"number"===t.setting_type&&(n=parseFloat(n)),e[s]=n}),r.NextResponse.json(e)}catch(t){return console.error("Error fetching notification settings:",t),r.NextResponse.json({error:"Failed to fetch settings"},{status:500})}}async function c(t){try{let e=await t.json();for(let[t,s]of Object.entries(e)){let e=t.replace(/([A-Z])/g,"_$1").toLowerCase(),n=String(s);await (0,i.I)(`INSERT INTO site_settings (setting_key, setting_value, category, updated_at)
         VALUES ($1, $2, 'notifications', CURRENT_TIMESTAMP)
         ON CONFLICT (setting_key) 
         DO UPDATE SET setting_value = $2, updated_at = CURRENT_TIMESTAMP`,[e,n])}return r.NextResponse.json({success:!0,message:"Settings updated"})}catch(t){return console.error("Error updating notification settings:",t),r.NextResponse.json({error:"Failed to update settings"},{status:500})}}i=(a.then?(await a)():a)[0],n()}catch(t){n(t)}})},44819:(t,e,s)=>{s.a(t,async(t,n)=>{try{s.d(e,{I:()=>a});var r=s(8678),i=t([r]);r=(i.then?(await i)():i)[0];let o=process.env.POSTGRES_URL_NON_POOLING||process.env.DATABASE_URL||process.env.POSTGRES_URL;if(!o)throw Error("DATABASE_URL, POSTGRES_URL, or POSTGRES_URL_NON_POOLING must be set. Did you forget to provision a database?");let c=new r.Pool({connectionString:o,ssl:!!o?.includes("sslmode=require")&&{rejectUnauthorized:!1}});async function a(t,e){let s=await c.connect();try{return await s.query(t,e)}finally{s.release()}}n()}catch(t){n(t)}})}};var e=require("../../../../webpack-runtime.js");e.C(t);var s=t=>e(e.s=t),n=e.X(0,[7787,4833],()=>s(95795));module.exports=n})();