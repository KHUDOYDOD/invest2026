"use strict";(()=>{var e={};e.id=9742,e.ids=[9742],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},95057:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>d,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p});var a=r(73278),o=r(45002),n=r(54877),u=r(49995),i=e([u]);u=(i.then?(await i)():i)[0];let c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/user/withdrawal-requests/route",pathname:"/api/user/withdrawal-requests",filename:"route",bundlePath:"app/api/user/withdrawal-requests/route"},resolvedPagePath:"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\api\\user\\withdrawal-requests\\route.ts",nextConfigOutput:"",userland:u}),{requestAsyncStorage:l,staticGenerationAsyncStorage:p,serverHooks:h}=c,m="/api/user/withdrawal-requests/route";function d(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}s()}catch(e){s(e)}})},49995:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>u});var a=r(71309),o=r(64985),n=e([o]);async function u(e){try{console.log("=== GET USER WITHDRAWAL REQUESTS ===");let{searchParams:t}=new URL(e.url),r=t.get("userId");if(console.log("Requested userId:",r),!r)return a.NextResponse.json({error:"User ID is required"},{status:400});try{let e=await (0,o.I)(`SELECT 
          id,
          user_id,
          amount,
          method,
          status,
          admin_comment,
          created_at,
          processed_at,
          processed_by
        FROM withdrawal_requests 
        WHERE user_id = $1 
        ORDER BY created_at DESC`,[r]);console.log(`Found ${e.rows.length} withdrawal requests for user ${r}`);let t=e.rows.map(e=>({id:e.id,amount:parseFloat(e.amount),method:e.method,status:e.status,adminComment:e.admin_comment,createdAt:e.created_at,processedAt:e.processed_at,processedBy:e.processed_by}));return a.NextResponse.json({success:!0,requests:t})}catch(e){return console.log("Withdrawal requests table error:",e.message),a.NextResponse.json({success:!0,requests:[]})}}catch(e){return console.error("âŒ Error fetching withdrawal requests:",e),a.NextResponse.json({success:!0,requests:[]})}}o=(n.then?(await n)():n)[0],s()}catch(e){s(e)}})},64985:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{I:()=>n,d:()=>i});var a=r(8678),o=e([a]);a=(o.then?(await o)():o)[0];let u=process.env.POSTGRES_URL_NON_POOLING||process.env.DATABASE_URL||process.env.POSTGRES_URL;if(!u)throw Error("DATABASE_URL, POSTGRES_URL, or POSTGRES_URL_NON_POOLING must be set. Did you forget to provision a database?");let i=new a.Pool({connectionString:u,ssl:!!u?.includes("sslmode=require")&&{rejectUnauthorized:!1}});async function n(e,t){let r=await i.connect();try{return await r.query(e,t)}finally{r.release()}}s()}catch(e){s(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7787,4833],()=>r(95057));module.exports=s})();