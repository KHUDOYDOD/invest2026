# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ –≤—ã–≤–æ–¥

## –ü—Ä–æ–±–ª–µ–º–∞
–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–í—ã–≤–æ–¥—ã (0)" –∏ "–ù–µ—Ç –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥", —Ö–æ—Ç—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç –∑–∞—è–≤–∫–∏.

## –®–∞–≥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î:

```bash
debug-withdrawal-requests.bat
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–∞–±–ª–∏—Ü–∞ `withdrawal_requests`
- ‚úÖ –°–∫–æ–ª—å–∫–æ –∑–∞—è–≤–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- ‚úÖ –î–µ—Ç–∞–ª–∏ –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –¥–ª—è —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Üí –ó–∞—è–≤–∫–∏
2. –ù–∞–∂–º–∏—Ç–µ F12 (–æ—Ç–∫—Ä—ã—Ç—å DevTools)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–û–±–Ω–æ–≤–∏—Ç—å" –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
üîÑ Fetching admin requests...
Withdrawal response status: 200
‚úÖ Withdrawal response data: { success: true, requests: [...] }
‚úÖ Withdrawal requests loaded: 5
üìã First withdrawal request: { id: "...", amount: 100, ... }
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É:**
```
‚ùå Error fetching requests: ...
Withdrawal response status: 403  // –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞
Withdrawal response status: 500  // –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω `npm run dev`, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:

```
=== ADMIN GET WITHDRAWAL REQUESTS ===
Request URL: http://localhost:3000/api/admin/withdrawal-requests
‚úÖ Admin verified: admin@example.com Role: admin
üì§ Executing database query...
‚úÖ Found 5 withdrawal requests
üìã First request: { id: "...", user: "–ò–≤–∞–Ω–æ–≤", amount: 100, status: "pending" }
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
–ï—Å–ª–∏ –≤ –±–∞–∑–µ –Ω–µ—Ç –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π, –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
add-withdrawal-details.bat
```

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ù–µ—Ç –∑–∞—è–≤–æ–∫ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É:
1. –ó–∞–π–¥–∏—Ç–µ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–µ –∞–¥–º–∏–Ω)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤"
3. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥

### 2. –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (403)
**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –≤–æ—à–ª–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ localStorage (F12 ‚Üí Application ‚Üí Local Storage)
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–π—Ç–∏ –∏ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ

### 3. –û—à–∏–±–∫–∞ SQL –∑–∞–ø—Ä–æ—Å–∞ (500)
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ SQL –æ—à–∏–±–æ–∫
- –í–æ–∑–º–æ–∂–Ω–æ, –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–æ–ª–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ - –∑–∞–ø—É—Å—Ç–∏—Ç–µ `add-withdrawal-details.bat`

### 4. API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ë–î –µ—Å—Ç—å –∑–∞–ø–∏—Å–∏ (–®–∞–≥ 1)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SQL –∑–∞–ø—Ä–æ—Å –≤ `app/api/admin/withdrawal-requests/route.ts`

### 5. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ JavaScript
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `withdrawalData.requests` –Ω–µ undefined

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –ø–æ—Ä—è–¥–∫—É:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
debug-withdrawal-requests.bat

# 2. –ï—Å–ª–∏ –Ω–µ—Ç –ø–æ–ª–µ–π - –¥–æ–±–∞–≤–∏—Ç—å
add-withdrawal-details.bat

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
npm run dev
```

–ó–∞—Ç–µ–º:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ó–∞—è–≤–∫–∏"
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞

## –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∑–∞—è–≤–∫–∏

–ï—Å–ª–∏ –≤ –ë–î –Ω–µ—Ç –∑–∞—è–≤–æ–∫, —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é:

1. **–ó–∞–π–¥–∏—Ç–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** (–Ω–µ –∞–¥–º–∏–Ω)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –≤—ã–≤–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞")
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - –°—É–º–º–∞: 50
   - –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã: 1234 5678 9012 3456
   - –§–ò–û: –¢–µ—Å—Ç–æ–≤—ã–π –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
5. –ù–∞–∂–º–∏—Ç–µ "–î–∞–ª–µ–µ" ‚Üí "–î–∞–ª–µ–µ" ‚Üí "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"
6. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ó–∞–ø—É—Å—Ç–∏–ª `debug-withdrawal-requests.bat`
- [ ] –í –ë–î –µ—Å—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª `add-withdrawal-details.bat` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª —Å–µ—Ä–≤–µ—Ä
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –°–æ–∑–¥–∞–ª —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞—è–≤–∫—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –í–æ—à–µ–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
- [ ] –û–±–Ω–æ–≤–∏–ª —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã:
1. –í—ã–≤–æ–¥ `debug-withdrawal-requests.bat`
2. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
3. –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
4. –°–∫—Ä–∏–Ω—à–æ—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å –ø—Ä–æ–±–ª–µ–º–æ–π
