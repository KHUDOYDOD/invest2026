<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç API –≤ –±—Ä–∞—É–∑–µ—Ä–µ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
            background: #2a2a2a;
        }
        .result {
            background: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .success { border-left: 4px solid #4CAF50; }
        .error { border-left: 4px solid #f44336; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>üß™ –¢–µ—Å—Ç API –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</h1>
    <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>

    <div class="test-section">
        <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>
        <button onclick="testStatistics()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å /api/statistics</button>
        <div id="statistics-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>üíº –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã</h2>
        <button onclick="testInvestmentPlans()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å /api/investment-plans</button>
        <div id="plans-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>‚≠ê –û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        <button onclick="testTestimonials()">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å /api/testimonials</button>
        <div id="testimonials-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ API</h2>
        <button onclick="testAllAPIs()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
    </div>

    <script>
        const BASE_URL = 'http://213.171.31.215';

        async function testAPI(endpoint, resultElementId, description) {
            const resultElement = document.getElementById(resultElementId);
            resultElement.textContent = `üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ ${description}...`;
            resultElement.className = 'result';

            try {
                console.log(`Testing: ${BASE_URL}${endpoint}`);
                
                const response = await fetch(`${BASE_URL}${endpoint}`, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                });

                const responseText = `–°—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}\n`;
                
                if (response.ok) {
                    const data = await response.json();
                    resultElement.textContent = responseText + '‚úÖ –£—Å–ø–µ—à–Ω–æ:\n' + JSON.stringify(data, null, 2);
                    resultElement.className = 'result success';
                } else {
                    const errorText = await response.text();
                    resultElement.textContent = responseText + '‚ùå –û—à–∏–±–∫–∞:\n' + errorText;
                    resultElement.className = 'result error';
                }
            } catch (error) {
                resultElement.textContent = `‚ùå –û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ${error.message}`;
                resultElement.className = 'result error';
                console.error('Network error:', error);
            }
        }

        async function testStatistics() {
            await testAPI('/api/statistics', 'statistics-result', '—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏');
        }

        async function testInvestmentPlans() {
            await testAPI('/api/investment-plans', 'plans-result', '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤');
        }

        async function testTestimonials() {
            await testAPI('/api/testimonials?limit=5', 'testimonials-result', '–æ—Ç–∑—ã–≤–æ–≤');
        }

        async function testAllAPIs() {
            await testStatistics();
            await testInvestmentPlans();
            await testTestimonials();
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('load', () => {
            console.log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã...');
            testAllAPIs();
        });
    </script>
</body>
</html>