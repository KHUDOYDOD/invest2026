"use strict";(()=>{var e={};e.id=2616,e.ids=[2616],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},76162:e=>{e.exports=require("stream")},21764:e=>{e.exports=require("util")},8678:e=>{e.exports=import("pg")},63657:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{originalPathname:()=>_,patchFetch:()=>d,requestAsyncStorage:()=>c,routeModule:()=>p,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var o=r(73278),a=r(45002),n=r(54877),u=r(68649),i=e([u]);u=(i.then?(await i)():i)[0];let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/user/deposit-requests/route",pathname:"/api/user/deposit-requests",filename:"route",bundlePath:"app/api/user/deposit-requests/route"},resolvedPagePath:"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\api\\user\\deposit-requests\\route.ts",nextConfigOutput:"",userland:u}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m}=p,_="/api/user/deposit-requests/route";function d(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}s()}catch(e){s(e)}})},68649:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{GET:()=>u});var o=r(71309),a=r(64985);r(67390);var n=e([a]);async function u(e){try{console.log("=== GET USER DEPOSIT REQUESTS ===");let{searchParams:t}=new URL(e.url),r=t.get("userId");if(console.log("Requested userId:",r),!r)return o.NextResponse.json({error:"User ID is required"},{status:400});let s=await (0,a.I)(`SELECT 
        id,
        user_id,
        amount,
        method,
        payment_details,
        status,
        admin_comment,
        created_at,
        processed_at,
        processed_by
      FROM deposit_requests 
      WHERE user_id = $1 
      ORDER BY created_at DESC`,[r]);console.log(`Found ${s.rows.length} deposit requests for user ${r}`);let n=s.rows.map(e=>{var t;return{id:e.id,amount:parseFloat(e.amount),method:({bank_card:"Банковская карта",crypto:"Криптовалюта",bank_transfer:"Банковский перевод",e_wallet:"Электронный кошелек",cash:"Наличные"})[t=e.method]||t,paymentDetails:e.payment_details,status:e.status,adminComment:e.admin_comment,createdAt:e.created_at,processedAt:e.processed_at,processedBy:e.processed_by}});return o.NextResponse.json({success:!0,requests:n})}catch(e){return console.error("❌ Error fetching deposit requests:",e),o.NextResponse.json({success:!0,requests:[]})}}a=(n.then?(await n)():n)[0],s()}catch(e){s(e)}})},64985:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.d(t,{I:()=>n,d:()=>i});var o=r(8678),a=e([o]);o=(a.then?(await a)():a)[0];let u=process.env.POSTGRES_URL_NON_POOLING||process.env.DATABASE_URL||process.env.POSTGRES_URL;if(!u)throw Error("DATABASE_URL, POSTGRES_URL, or POSTGRES_URL_NON_POOLING must be set. Did you forget to provision a database?");let i=new o.Pool({connectionString:u,ssl:!!u?.includes("sslmode=require")&&{rejectUnauthorized:!1}});async function n(e,t){let r=await i.connect();try{return await r.query(e,t)}finally{r.release()}}s()}catch(e){s(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[7787,4833,7390],()=>r(63657));module.exports=s})();