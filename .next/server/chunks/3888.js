"use strict";exports.id=3888,exports.ids=[3888],exports.modules={67699:(e,t,s)=>{s.d(t,{a:()=>l});var a=s(97247),r=s(28964),i=s(34178);function l({children:e}){let t=(0,i.useRouter)(),[s,l]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!0),[n,o]=(0,r.useState)(null);return d?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-t-blue-500 border-r-transparent border-b-blue-500 border-l-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-white text-lg",children:"Проверка авторизации..."})]})}):n||!s?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"text-red-400 text-xl mb-4",children:n||"Требуется авторизация"}),a.jsx("button",{onClick:()=>t.push("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Перейти к авторизации"})]})}):a.jsx(a.Fragment,{children:e})}},77455:(e,t,s)=>{s.d(t,{R:()=>u});var a=s(97247),r=s(28964),i=s(88964),l=s(58053);let d=(0,s(26323).Z)("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);var c=s(28174),n=s(99219),o=s(17712),m=s(74747),x=s(58772),h=s(28339),p=s(84719);function u({limit:e=10}){let[t,s]=(0,r.useState)([]),[u,f]=(0,r.useState)(!0),[y,g]=(0,r.useState)(null),j=async()=>{try{f(!0),g(null);let e=localStorage.getItem("authToken"),t=localStorage.getItem("userId");if(!e||!t){g("Токен не найден");return}let a=await fetch(`/api/dashboard/all?userId=${t}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),r=await a.json();if(a.ok)s(r.transactions||[]);else{if(401===a.status){localStorage.clear(),window.location.href="/login";return}g(r.error||"Ошибка загрузки транзакций")}}catch(e){console.error("Error fetching transactions:",e),g(e.message||"Ошибка соединения")}finally{f(!1)}},w=e=>{switch(e){case"deposit":return a.jsx(d,{className:"h-4 w-4"});case"withdrawal":return a.jsx(c.Z,{className:"h-4 w-4"});case"investment":return a.jsx(n.Z,{className:"h-4 w-4"});default:return a.jsx(o.Z,{className:"h-4 w-4"})}},v=e=>{switch(e){case"deposit":return"text-green-400 bg-green-500/20";case"withdrawal":return"text-red-400 bg-red-500/20";case"investment":return"text-blue-400 bg-blue-500/20";default:return"text-gray-400 bg-gray-500/20"}},N=e=>{switch(e.type){case"deposit":return e.description||"Пополнение баланса";case"withdrawal":return e.description||"Вывод средств";case"investment":return e.plan_name?`Инвестиция в "${e.plan_name}"`:"Инвестиция";default:return e.description||"Транзакция"}},b=e=>{switch(e.toLowerCase()){case"completed":case"approved":return a.jsx(m.Z,{className:"h-3 w-3"});case"pending":default:return a.jsx(o.Z,{className:"h-3 w-3"});case"failed":case"rejected":return a.jsx(x.Z,{className:"h-3 w-3"})}},k=e=>{switch(e.toLowerCase()){case"completed":case"approved":return"default";case"pending":return"secondary";case"failed":case"rejected":return"destructive";default:return"outline"}},Z=e=>{switch(e.toLowerCase()){case"completed":return"✅ Завершена";case"pending":return"⏳ На проверке";case"approved":return"✅ Одобрено";case"rejected":return"❌ Отклонено";case"failed":return"❌ Отклонена";default:return e}};if(u)return a.jsx("div",{className:"space-y-3",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-8 h-8 bg-white/10 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("div",{className:"w-32 h-4 bg-white/10 rounded"}),a.jsx("div",{className:"w-20 h-3 bg-white/5 rounded"})]})]}),a.jsx("div",{className:"w-16 h-4 bg-white/10 rounded"})]},t))});if(y)return(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-red-400 mb-4",children:y}),(0,a.jsxs)(l.z,{onClick:j,variant:"outline",size:"sm",children:[a.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Повторить"]})]});if(0===t.length)return(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(o.Z,{className:"h-12 w-12 text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 mb-2",children:"У вас пока нет транзакций"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Пополните баланс или сделайте инвестицию, чтобы увидеть историю операций"})]});let C=e?t.slice(0,e):t;return(0,a.jsxs)("div",{className:"space-y-3",children:[C.map((e,t)=>(0,a.jsxs)(p.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"flex items-center justify-between p-4 hover:bg-white/5 rounded-lg transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`p-2 rounded-full ${v(e.type)}`,children:w(e.type)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:N(e)}),e.description&&e.description!==N(e)&&a.jsx("p",{className:"text-white/80 text-sm font-medium",children:e.description}),a.jsx("p",{className:"text-white/60 text-sm",children:new Date(e.created_at).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})}),e.method&&a.jsx("p",{className:"text-white/40 text-xs",children:"balance"===e.method?"С баланса":"bank_transfer"===e.method?"Банковский перевод":"card"===e.method?"Банковская карта":"crypto"===e.method?"Криптовалюта":e.method})]})]}),a.jsx("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:`font-semibold ${"deposit"===e.type||"profit"===e.type?"text-green-400":"withdrawal"===e.type||"investment"===e.type?"text-red-400":"text-white"}`,children:["deposit"===e.type||"profit"===e.type?"+":"-","$",Number(e.amount).toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[b(e.status),a.jsx(i.C,{variant:k(e.status),className:"text-xs",children:Z(e.status)})]})]})})]},e.id)),e&&t.length>e&&(0,a.jsxs)(p.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*C.length+.2},className:"text-center py-4 border-t border-white/10 mt-4",children:[(0,a.jsxs)("p",{className:"text-white/60 text-sm",children:["И еще ",t.length-e," транзакций..."]}),a.jsx("p",{className:"text-white/40 text-xs mt-1",children:'Перейдите на страницу "Все транзакции" для просмотра полной истории'})]})]})}},27757:(e,t,s)=>{s.d(t,{Ol:()=>d,SZ:()=>n,Zb:()=>l,aY:()=>o,eW:()=>m,ll:()=>c});var a=s(97247),r=s(28964),i=s(25008);let l=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));l.displayName="Card";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));c.displayName="CardTitle";let n=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent";let m=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},74747:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},58772:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},17712:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},99219:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28339:(e,t,s)=>{s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])}};