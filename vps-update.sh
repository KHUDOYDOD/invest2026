#!/bin/bash

# Скрипт обновления сайта на VPS
# Запустите на VPS: bash vps-update.sh

set -e

echo "═══════════════════════════════════════════════════════════════"
echo "  🔄 ОБНОВЛЕНИЕ САЙТА"
echo "═══════════════════════════════════════════════════════════════"
echo ""

cd /var/www/invest2026

echo "📥 Получение обновлений из GitHub..."
git pull origin main

echo ""
echo "📦 Установка зависимостей..."
npm install

echo ""
echo "🔨 Сборка проекта..."
npm run build

echo ""
echo "🔄 Перезапуск приложения..."
pm2 restart invest2026

echo ""
echo "═══════════════════════════════════════════════════════════════"
echo "  ✅ САЙТ ОБНОВЛЕН!"
echo "═══════════════════════════════════════════════════════════════"
echo ""
echo "📊 Статус:"
pm2 status

echo ""
echo "📝 Просмотр логов: pm2 logs invest2026"
echo ""
