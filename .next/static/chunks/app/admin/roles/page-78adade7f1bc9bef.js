(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3717],{78641:function(e,s,r){Promise.resolve().then(r.bind(r,87137))},87137:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return k}});var t=r(57437),a=r(2265),n=r(66070),i=r(62869),l=r(95186),o=r(26815),c=r(35974),d=r(1828),u=r(98617),m=r(88906),f=r(51884),x=r(95805),g=r(99397),p=r(15868),h=r(18930),b=r(98728),v=r(30401),N=r(32489),j=r(98239),y=r(14438);let w=[{id:1,name:"Супер Админ",description:"Полный доступ ко всем функциям системы",permissions:["all"],userCount:2,color:"from-red-500 to-pink-600",icon:u.Z},{id:2,name:"Администратор",description:"Управление пользователями и контентом",permissions:["users.manage","content.manage","transactions.view","settings.manage"],userCount:5,color:"from-purple-500 to-indigo-600",icon:m.Z},{id:3,name:"Модератор",description:"Модерация контента и поддержка пользователей",permissions:["content.moderate","users.view","support.manage"],userCount:12,color:"from-blue-500 to-cyan-600",icon:f.Z},{id:4,name:"Пользователь",description:"Стандартные права пользователя",permissions:["profile.manage","investments.manage"],userCount:15420,color:"from-green-500 to-emerald-600",icon:x.Z}],C=[{id:"users.manage",name:"Управление пользователями",category:"Пользователи"},{id:"users.view",name:"Просмотр пользователей",category:"Пользователи"},{id:"users.delete",name:"Удаление пользователей",category:"Пользователи"},{id:"content.manage",name:"Управление контентом",category:"Контент"},{id:"content.moderate",name:"Модерация контента",category:"Контент"},{id:"transactions.manage",name:"Управление транзакциями",category:"Финансы"},{id:"transactions.view",name:"Просмотр транзакций",category:"Финансы"},{id:"settings.manage",name:"Управление настройками",category:"Система"},{id:"support.manage",name:"Управление поддержкой",category:"Поддержка"},{id:"profile.manage",name:"Управление профилем",category:"Профиль"},{id:"investments.manage",name:"Управление инвестициями",category:"Инвестиции"}];function k(){let[e,s]=(0,a.useState)(w),[r,f]=(0,a.useState)(null),[x,k]=(0,a.useState)(!1),[Z,_]=(0,a.useState)(!1),z=r=>{confirm("Вы уверены, что хотите удалить эту роль?")&&(s(e.filter(e=>e.id!==r)),y.Am.success("Роль успешно удалена!"))},R=e=>{if(!r)return;let s=r.permissions.includes(e)?r.permissions.filter(s=>s!==e):[...r.permissions,e];f({...r,permissions:s})};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-red-400 bg-clip-text text-transparent mb-2",children:"\uD83D\uDC51 Управление ролями"}),(0,t.jsx)("p",{className:"text-slate-400 text-lg",children:"Настройка ролей и прав доступа пользователей"})]}),(0,t.jsxs)(i.z,{onClick:()=>{_(!0),f({id:Date.now(),name:"",description:"",permissions:[],userCount:0,color:"from-gray-500 to-gray-600",icon:m.Z})},className:"bg-gradient-to-r from-purple-600 to-pink-600",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Создать роль"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-4",children:e.map((e,s)=>(0,t.jsx)(j.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*s},children:(0,t.jsx)(n.Zb,{className:"bg-slate-800/50 border-slate-700 hover:border-slate-600 transition-all",children:(0,t.jsx)(n.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,t.jsx)("div",{className:"p-3 bg-gradient-to-r ".concat(e.color," rounded-xl"),children:(0,t.jsx)(e.icon,{className:"h-6 w-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,t.jsxs)(c.C,{variant:"secondary",className:"bg-slate-700",children:[e.userCount," ",1===e.userCount?"пользователь":"пользователей"]})]}),(0,t.jsx)("p",{className:"text-slate-400 mb-4",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.permissions.includes("all")?(0,t.jsxs)(c.C,{className:"bg-gradient-to-r from-yellow-500 to-orange-500",children:[(0,t.jsx)(u.Z,{className:"h-3 w-3 mr-1"}),"Все права"]}):e.permissions.slice(0,3).map(e=>{var s;return(0,t.jsx)(c.C,{variant:"outline",className:"border-slate-600 text-slate-300",children:(null===(s=C.find(s=>s.id===e))||void 0===s?void 0:s.name)||e},e)}),e.permissions.length>3&&!e.permissions.includes("all")&&(0,t.jsxs)(c.C,{variant:"outline",className:"border-slate-600 text-slate-300",children:["+",e.permissions.length-3," еще"]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>{f(e),k(!0),_(!1)},className:"text-blue-400 hover:text-blue-300 hover:bg-blue-400/10",children:(0,t.jsx)(p.Z,{className:"h-4 w-4"})}),e.id>2&&(0,t.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>z(e.id),className:"text-red-400 hover:text-red-300 hover:bg-red-400/10",children:(0,t.jsx)(h.Z,{className:"h-4 w-4"})})]})]})})})},e.id))}),(0,t.jsx)("div",{className:"lg:col-span-1",children:(x||Z)&&r?(0,t.jsxs)(n.Zb,{className:"bg-slate-800/50 border-slate-700 sticky top-6",children:[(0,t.jsx)(n.Ol,{children:(0,t.jsxs)(n.ll,{className:"text-white flex items-center",children:[(0,t.jsx)(b.Z,{className:"mr-2 h-5 w-5"}),Z?"Создание роли":"Редактирование роли"]})}),(0,t.jsxs)(n.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{className:"text-white",children:"Название роли"}),(0,t.jsx)(l.I,{value:r.name,onChange:e=>f({...r,name:e.target.value}),placeholder:"Введите название",className:"bg-slate-700 border-slate-600 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o._,{className:"text-white",children:"Описание"}),(0,t.jsx)(l.I,{value:r.description,onChange:e=>f({...r,description:e.target.value}),placeholder:"Введите описание",className:"bg-slate-700 border-slate-600 text-white"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(o._,{className:"text-white",children:"Права доступа"}),(0,t.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:Object.entries(C.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{})).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-slate-400",children:s}),a.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-slate-700/50 rounded",children:[(0,t.jsx)("span",{className:"text-sm text-slate-300",children:e.name}),(0,t.jsx)(d.r,{checked:r.permissions.includes(e.id),onCheckedChange:()=>R(e.id)})]},e.id))]},s)})})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.z,{onClick:()=>{r&&(Z?(s([...e,r]),y.Am.success("Роль успешно создана!")):(s(e.map(e=>e.id===r.id?r:e)),y.Am.success("Роль успешно обновлена!")),_(!1),k(!1),f(null))},className:"flex-1 bg-green-600 hover:bg-green-700",children:[(0,t.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Сохранить"]}),(0,t.jsxs)(i.z,{onClick:()=>{k(!1),_(!1),f(null)},variant:"outline",className:"flex-1 border-slate-600 text-slate-300",children:[(0,t.jsx)(N.Z,{className:"h-4 w-4 mr-2"}),"Отмена"]})]})]})]}):(0,t.jsx)(n.Zb,{className:"bg-slate-800/50 border-slate-700",children:(0,t.jsxs)(n.aY,{className:"p-12 text-center",children:[(0,t.jsx)(m.Z,{className:"h-16 w-16 mx-auto mb-4 text-slate-600"}),(0,t.jsx)("p",{className:"text-slate-400",children:"Выберите роль для редактирования или создайте новую"})]})})})]})]})}},35974:function(e,s,r){"use strict";r.d(s,{C:function(){return l}});var t=r(57437);r(2265);var a=r(90535),n=r(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:r,...a}=e;return(0,t.jsx)("div",{className:(0,n.cn)(i({variant:r}),s),...a})}},62869:function(e,s,r){"use strict";r.d(s,{d:function(){return o},z:function(){return c}});var t=r(57437),a=r(2265),n=r(37053),i=r(90535),l=r(94508);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,s)=>{let{className:r,variant:a,size:i,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,t.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:r})),ref:s,...d})});c.displayName="Button"},66070:function(e,s,r){"use strict";r.d(s,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return o}});var t=r(57437),a=r(2265),n=r(94508);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});o.displayName="CardTitle";let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});c.displayName="CardDescription";let d=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},95186:function(e,s,r){"use strict";r.d(s,{I:function(){return i}});var t=r(57437),a=r(2265),n=r(94508);let i=a.forwardRef((e,s)=>{let{className:r,type:a,...i}=e;return(0,t.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...i})});i.displayName="Input"},26815:function(e,s,r){"use strict";r.d(s,{_:function(){return c}});var t=r(57437),a=r(2265),n=r(6394),i=r(90535),l=r(94508);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(n.f,{ref:s,className:(0,l.cn)(o(),r),...a})});c.displayName=n.f.displayName},1828:function(e,s,r){"use strict";r.d(s,{r:function(){return l}});var t=r(57437),a=r(2265),n=r(50721),i=r(94508);let l=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,t.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...a,ref:s,children:(0,t.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});l.displayName=n.fC.displayName},94508:function(e,s,r){"use strict";r.d(s,{cn:function(){return n}});var t=r(61994),a=r(53335);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,a.m6)((0,t.W)(s))}}},function(e){e.O(0,[9203,8239,4438,4237,2971,2117,1744],function(){return e(e.s=78641)}),_N_E=e.O()}]);