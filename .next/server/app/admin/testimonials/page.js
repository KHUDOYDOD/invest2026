(()=>{var e={};e.id=3274,e.ids=[3274],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7090:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>c}),s(11106),s(70893),s(93678),s(90996);var a=s(30170),r=s(45002),l=s(83876),i=s.n(l),n=s(66299),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["admin",{children:["testimonials",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,11106)),"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\admin\\testimonials\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,70893)),"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,93678)),"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,90996,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\admin\\testimonials\\page.tsx"],m="/admin/testimonials/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/testimonials/page",pathname:"/admin/testimonials",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},92803:(e,t,s)=>{Promise.resolve().then(s.bind(s,87061))},87061:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(97247),r=s(28964),l=s(89367),i=s(27757),n=s(58053),d=s(88964),c=s(44494),o=s(22394),m=s(62752),x=s(58772),h=s(17712),u=s(90526),p=s(84644),b=s(74974),g=s(70457),f=s(33841),j=s(50820),v=s(37073);function w(){let[e,t]=(0,r.useState)([]),[s,w]=(0,r.useState)({pending:0,approved:0,rejected:0,total:0}),[N,y]=(0,r.useState)(!0),[k,Z]=(0,r.useState)("all"),[C,P]=(0,r.useState)(null),[z,D]=(0,r.useState)(""),[S,_]=(0,r.useState)(null),A=async()=>{try{y(!0);let e=localStorage.getItem("authToken");if(!e)return;let s=new URLSearchParams({status:k,limit:"50"}),a=await fetch(`/api/admin/testimonials?${s}`,{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();e.success&&(t(e.testimonials),w(e.stats))}}catch(e){console.error("Error loading testimonials:",e)}finally{y(!1)}},M=async(e,t)=>{try{_(e);let s=localStorage.getItem("authToken");if(!s)return;let a=await fetch(`/api/admin/testimonials/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({status:t,adminComment:z.trim()||void 0})});a.ok&&(await a.json()).success&&(A(),P(null),D(""))}catch(e){console.error("Error updating testimonial:",e)}finally{_(null)}},I=async e=>{if(confirm("Вы уверены, что хотите удалить этот отзыв?"))try{_(e);let t=localStorage.getItem("authToken");if(!t)return;(await fetch(`/api/admin/testimonials/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(A(),P(null))}catch(e){console.error("Error deleting testimonial:",e)}finally{_(null)}},R=e=>{switch(e){case"approved":return a.jsx(m.Z,{className:"h-5 w-5 text-green-500"});case"rejected":return a.jsx(x.Z,{className:"h-5 w-5 text-red-500"});default:return a.jsx(h.Z,{className:"h-5 w-5 text-yellow-500"})}},E=e=>{switch(e){case"approved":return"Одобрен";case"rejected":return"Отклонен";default:return"На модерации"}},$=e=>{switch(e){case"approved":return"bg-green-500/20 text-green-400 border-green-500/30";case"rejected":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}},T=e=>new Date(e).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return a.jsx(l.u,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"inline-flex items-center px-6 py-3 rounded-full bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 mb-6 backdrop-blur-sm",children:[a.jsx(u.Z,{className:"h-5 w-5 mr-3 text-purple-400"}),a.jsx("span",{className:"text-purple-300 font-medium",children:"Модерация отзывов"})]}),a.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-purple-400 via-blue-400 to-cyan-400 bg-clip-text text-transparent mb-4",children:"\uD83D\uDCDD Управление отзывами"}),a.jsx("p",{className:"text-white/80 max-w-2xl mx-auto",children:"Модерируйте отзывы пользователей, одобряйте или отклоняйте их для публикации на сайте"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[a.jsx(i.Zb,{className:"bg-white/10 backdrop-blur-xl border-white/20",children:(0,a.jsxs)(i.aY,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-white mb-2",children:s.total}),a.jsx("div",{className:"text-white/60 text-sm",children:"Всего отзывов"})]})}),a.jsx(i.Zb,{className:"bg-yellow-500/20 backdrop-blur-xl border-yellow-500/30",children:(0,a.jsxs)(i.aY,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:s.pending}),a.jsx("div",{className:"text-yellow-300 text-sm",children:"На модерации"})]})}),a.jsx(i.Zb,{className:"bg-green-500/20 backdrop-blur-xl border-green-500/30",children:(0,a.jsxs)(i.aY,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:s.approved}),a.jsx("div",{className:"text-green-300 text-sm",children:"Одобрено"})]})}),a.jsx(i.Zb,{className:"bg-red-500/20 backdrop-blur-xl border-red-500/30",children:(0,a.jsxs)(i.aY,{className:"p-6 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-red-400 mb-2",children:s.rejected}),a.jsx("div",{className:"text-red-300 text-sm",children:"Отклонено"})]})})]}),a.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:[{key:"all",label:"Все отзывы",count:s.total},{key:"pending",label:"На модерации",count:s.pending},{key:"approved",label:"Одобренные",count:s.approved},{key:"rejected",label:"Отклоненные",count:s.rejected}].map(e=>(0,a.jsxs)(n.z,{onClick:()=>Z(e.key),variant:k===e.key?"default":"outline",className:`${k===e.key?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-white/10 border-white/20 text-white hover:bg-white/20"}`,children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),e.label," (",e.count,")"]},e.key))}),N?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto"}),a.jsx("p",{className:"text-white/60 mt-4",children:"Загрузка отзывов..."})]}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(u.Z,{className:"h-16 w-16 text-white/40 mx-auto mb-4"}),a.jsx("p",{className:"text-white/60 text-lg",children:"Отзывы не найдены"})]}):a.jsx("div",{className:"grid gap-6",children:e.map(e=>a.jsx(i.Zb,{className:"bg-white/10 backdrop-blur-xl border-white/20 shadow-2xl",children:(0,a.jsxs)(i.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((t,s)=>a.jsx(b.Z,{className:`h-5 w-5 ${s<e.rating?"text-yellow-400 fill-yellow-400":"text-gray-400"}`},s))}),(0,a.jsxs)(d.C,{className:`${$(e.status)} border`,children:[R(e.status),a.jsx("span",{className:"ml-2",children:E(e.status)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(n.z,{size:"sm",variant:"outline",onClick:()=>P(e),className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:[a.jsx(g.Z,{className:"h-4 w-4 mr-1"}),"Подробнее"]}),a.jsx(n.z,{size:"sm",variant:"outline",onClick:()=>I(e.id),disabled:S===e.id,className:"bg-red-500/20 border-red-500/30 text-red-400 hover:bg-red-500/30",children:a.jsx(f.Z,{className:"h-4 w-4"})})]})]}),a.jsx("h3",{className:"text-white font-bold text-xl mb-3",children:e.title}),a.jsx("p",{className:"text-white/80 mb-4 leading-relaxed",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-400 flex items-center justify-center text-white font-bold",children:e.user.name.charAt(0)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:e.user.name}),a.jsx("p",{className:"text-white/60 text-sm",children:e.user.location})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-white/60 text-sm flex items-center gap-1",children:[a.jsx(j.Z,{className:"h-4 w-4"}),T(e.createdAt)]}),e.approvedAt&&(0,a.jsxs)("p",{className:"text-green-400 text-sm",children:["Одобрен: ",T(e.approvedAt)]})]})]}),e.adminComment&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:[a.jsx("p",{className:"text-blue-300 text-sm font-medium mb-1",children:"Комментарий модератора:"}),a.jsx("p",{className:"text-blue-200 text-sm",children:e.adminComment})]}),"pending"===e.status&&(0,a.jsxs)("div",{className:"mt-4 flex gap-3",children:[(0,a.jsxs)(n.z,{onClick:()=>M(e.id,"approved"),disabled:S===e.id,className:"bg-green-600 hover:bg-green-700 text-white",children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Одобрить"]}),(0,a.jsxs)(n.z,{onClick:()=>M(e.id,"rejected"),disabled:S===e.id,className:"bg-red-600 hover:bg-red-700 text-white",children:[a.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Отклонить"]})]})]})},e.id))}),C&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,a.jsxs)(i.Zb,{className:"bg-white/10 backdrop-blur-xl border-white/20 shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsx(i.Ol,{children:(0,a.jsxs)(i.ll,{className:"text-white flex items-center gap-3",children:[a.jsx(v.Z,{className:"h-6 w-6 text-purple-400"}),"Детали отзыва"]})}),(0,a.jsxs)(i.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center gap-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>a.jsx(b.Z,{className:`h-6 w-6 ${t<C.rating?"text-yellow-400 fill-yellow-400":"text-gray-400"}`},t))}),(0,a.jsxs)(d.C,{className:`${$(C.status)} border`,children:[R(C.status),a.jsx("span",{className:"ml-2",children:E(C.status)})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:C.title}),a.jsx("p",{className:"text-white/80 leading-relaxed",children:C.content})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-white/5 rounded-lg",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-400 flex items-center justify-center text-white font-bold",children:C.user.name.charAt(0)}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-white font-medium",children:C.user.name}),a.jsx("p",{className:"text-white/60 text-sm",children:C.user.email}),a.jsx("p",{className:"text-white/60 text-sm",children:C.user.location})]})]}),"pending"===C.status&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx(o._,{className:"text-white font-medium",children:"Комментарий модератора (необязательно)"}),a.jsx(c.g,{value:z,onChange:e=>D(e.target.value),placeholder:"Добавьте комментарий для пользователя...",className:"bg-white/10 border-white/20 text-white placeholder:text-white/50 mt-2",rows:3})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(n.z,{onClick:()=>M(C.id,"approved"),disabled:S===C.id,className:"bg-green-600 hover:bg-green-700 text-white flex-1",children:[a.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Одобрить отзыв"]}),(0,a.jsxs)(n.z,{onClick:()=>M(C.id,"rejected"),disabled:S===C.id,className:"bg-red-600 hover:bg-red-700 text-white flex-1",children:[a.jsx(x.Z,{className:"h-4 w-4 mr-2"}),"Отклонить отзыв"]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(n.z,{onClick:()=>{P(null),D("")},variant:"outline",className:"bg-white/10 border-white/20 text-white hover:bg-white/20",children:"Закрыть"})})]})]})})]})})}function N(){return a.jsx(l.u,{children:a.jsx(w,{})})}},89367:(e,t,s)=>{"use strict";s.d(t,{u:()=>i});var a=s(97247),r=s(28964),l=s(34178);function i({children:e}){let[t,s]=(0,r.useState)(!1),[i,n]=(0,r.useState)(!0);return((0,l.useRouter)(),i)?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-indigo-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-400 mx-auto mb-4"}),a.jsx("p",{className:"text-white/60",children:"Проверка доступа..."})]})}):t?a.jsx(a.Fragment,{children:e}):null}},27757:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>n,SZ:()=>c,Zb:()=>i,aY:()=>o,eW:()=>m,ll:()=>d});var a=s(97247),r=s(28964),l=s(25008);let i=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let n=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let d=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let c=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));c.displayName="CardDescription";let o=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("p-6 pt-0",e),...t}));o.displayName="CardContent";let m=r.forwardRef(({className:e,...t},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},22394:(e,t,s)=>{"use strict";s.d(t,{_:()=>c});var a=s(97247),r=s(28964),l=s(40768),i=s(87972),n=s(25008);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...t},s)=>a.jsx(l.f,{ref:s,className:(0,n.cn)(d(),e),...t}));c.displayName=l.f.displayName},44494:(e,t,s)=>{"use strict";s.d(t,{g:()=>i});var a=s(97247),r=s(28964),l=s(25008);let i=r.forwardRef(({className:e,...t},s)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));i.displayName="Textarea"},50820:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},62752:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},58772:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},70457:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},84644:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},37073:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},33841:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(26323).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},11106:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(45347).createProxy)(String.raw`C:\Users\x4539\Downloads\Invest2025-main\Invest2025-main\app\admin\testimonials\page.tsx#default`)},40768:(e,t,s)=>{"use strict";s.d(t,{f:()=>n});var a=s(28964),r=s(22251),l=s(97247),i=a.forwardRef((e,t)=>(0,l.jsx)(r.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=i}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[7787,4947,3514,4268,9498,5976],()=>s(7090));module.exports=a})();