"use strict";(()=>{var t={};t.id=4076,t.ids=[4076],t.modules={20399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:t=>{t.exports=import("pg")},71928:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.r(e),a.d(e,{originalPathname:()=>S,patchFetch:()=>c,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>_,staticGenerationAsyncStorage:()=>p});var r=a(73278),o=a(45002),s=a(54877),i=a(11425),l=t([i]);i=(l.then?(await l)():l)[0];let u=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/all-users/route",pathname:"/api/all-users",filename:"route",bundlePath:"app/api/all-users/route"},resolvedPagePath:"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\api\\all-users\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:_}=u,S="/api/all-users/route";function c(){return(0,s.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:p})}n()}catch(t){n(t)}})},11425:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.r(e),a.d(e,{GET:()=>i});var r=a(71309),o=a(64985),s=t([o]);async function i(){try{console.log("Fetching all users...");let t=await (0,o.I)(`
      SELECT 
        u.id,
        u.full_name as name,
        u.email,
        u.created_at as joinedDate,
        u.country,
        u.city,
        u.status,
        COALESCE(u.balance, 0) as balance,
        COALESCE(u.total_invested, 0) as total_invested,
        COALESCE(u.total_earned, 0) as total_profit,
        COALESCE(u.referral_count, 0) as referrals_count,
        COALESCE(u.last_login, u.created_at) as last_activity
      FROM users u
      ORDER BY u.created_at DESC
    `);if(console.log(`Found ${t.rows.length} users in database`),0===t.rows.length){let t=[{id:"1",name:"Александр Петров",email:"alex@example.com",joinedDate:new Date(Date.now()-6048e5).toISOString(),country:"RU",city:"Москва",status:"active",balance:2500.5,total_invested:1e4,total_profit:1250.75,referrals_count:5,last_activity:new Date(Date.now()-72e5).toISOString()},{id:"2",name:"Мария Иванова",email:"maria@example.com",joinedDate:new Date(Date.now()-12096e5).toISOString(),country:"UA",city:"Киев",status:"active",balance:1750.25,total_invested:5e3,total_profit:625.5,referrals_count:3,last_activity:new Date(Date.now()-18e6).toISOString()},{id:"3",name:"Дмитрий Смирнов",email:"dmitry@example.com",joinedDate:new Date(Date.now()-18144e5).toISOString(),country:"BY",city:"Минск",status:"active",balance:3200,total_invested:15e3,total_profit:2100.25,referrals_count:8,last_activity:new Date(Date.now()-36e5).toISOString()}];return r.NextResponse.json({success:!0,data:t,total:t.length})}let e=t.rows.map(t=>({...t,balance:parseFloat(t.balance)||0,total_invested:parseFloat(t.total_invested)||0,total_profit:parseFloat(t.total_profit)||0,referrals_count:parseInt(t.referrals_count)||0,joinedDate:t.joinedDate?new Date(t.joinedDate).toISOString():new Date().toISOString(),last_activity:t.last_activity?new Date(t.last_activity).toISOString():null}));return r.NextResponse.json({success:!0,data:e,total:e.length})}catch(e){console.error("Error fetching all users:",e);let t=[{id:"1",name:"Александр Петров",email:"alex@example.com",joinedDate:new Date(Date.now()-6048e5).toISOString(),country:"RU",city:"Москва",status:"active",balance:2500.5,total_invested:1e4,total_profit:1250.75,referrals_count:5,last_activity:new Date(Date.now()-72e5).toISOString()},{id:"2",name:"Мария Иванова",email:"maria@example.com",joinedDate:new Date(Date.now()-12096e5).toISOString(),country:"UA",city:"Киев",status:"active",balance:1750.25,total_invested:5e3,total_profit:625.5,referrals_count:3,last_activity:new Date(Date.now()-18e6).toISOString()}];return r.NextResponse.json({success:!0,data:t,total:t.length})}}o=(s.then?(await s)():s)[0],n()}catch(t){n(t)}})},64985:(t,e,a)=>{a.a(t,async(t,n)=>{try{a.d(e,{I:()=>s,d:()=>l});var r=a(8678),o=t([r]);r=(o.then?(await o)():o)[0];let i=process.env.POSTGRES_URL_NON_POOLING||process.env.DATABASE_URL||process.env.POSTGRES_URL;if(!i)throw Error("DATABASE_URL, POSTGRES_URL, or POSTGRES_URL_NON_POOLING must be set. Did you forget to provision a database?");let l=new r.Pool({connectionString:i,ssl:!!i?.includes("sslmode=require")&&{rejectUnauthorized:!1}});async function s(t,e){let a=await l.connect();try{return await a.query(t,e)}finally{a.release()}}n()}catch(t){n(t)}})}};var e=require("../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),n=e.X(0,[7787,4833],()=>a(71928));module.exports=n})();