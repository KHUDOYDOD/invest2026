(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7663],{56180:function(e,t,r){Promise.resolve().then(r.bind(r,61433))},61433:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return u},a:function(){return l}});var n=r(57437),o=r(2265);let a=(0,o.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,o.useState)(null),[l,i]=(0,o.useState)(!0),[s,c]=(0,o.useState)(null),d=async()=>{try{i(!0),c(null);let e=localStorage.getItem("authToken"),t=localStorage.getItem("userId");if(!e||!t){u(null);return}let r=await fetch("/api/dashboard/all?userId=".concat(t),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!r.ok){if(401===r.status){localStorage.clear(),window.location.href="/login";return}throw Error("Failed to fetch user data")}let n=await r.json();u(n.user)}catch(e){console.error("Error loading user:",e),c(e instanceof Error?e.message:"Failed to load user")}finally{i(!1)}};return(0,o.useEffect)(()=>{d()},[]),(0,n.jsx)(a.Provider,{value:{user:r,loading:l,error:s,refreshUser:d,updateBalance:e=>{r&&u({...r,balance:e})}},children:t})}function l(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=56180)}),_N_E=e.O()}]);