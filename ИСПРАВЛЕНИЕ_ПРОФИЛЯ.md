# Исправление ошибки загрузки профиля

## Проблема
При открытии страниц `/dashboard/profile` и `/dashboard/referrals` появляется ошибка "Ошибка загрузки профиля".

## Причина
В базе данных отсутствуют необходимые поля для профиля пользователя.

## Решение

### Шаг 1: Добавьте недостающие поля в базу данных

Запустите файл `add-profile-fields.bat`:

```bash
add-profile-fields.bat
```

Этот скрипт добавит следующие поля в таблицу `users`:
- `phone` - телефон пользователя
- `country` - страна
- `city` - город
- `bio` - информация о себе
- `avatar_url` - URL аватара
- `referral_code` - реферальный код (генерируется автоматически)
- `referred_by` - кем был приглашен
- `last_login` - последний вход
- `total_earned` - общий заработок
- `role` - роль пользователя

### Шаг 2: Проверьте работу

1. Перезапустите сервер разработки (если он запущен)
2. Откройте страницу профиля: http://localhost:3000/dashboard/profile
3. Откройте страницу рефералов: http://localhost:3000/dashboard/referrals

## Что было улучшено

### Страница профиля (/dashboard/profile)
✅ Красивый дизайн с анимациями
✅ Карточки со статистикой (баланс, прибыль, рефералы)
✅ Редактирование личных данных
✅ Отображение реферального кода
✅ Кнопка возврата к дашборду

### Страница рефералов (/dashboard/referrals)
✅ Статистика по рефералам
✅ Реферальная ссылка с кнопкой копирования
✅ Кнопки для шаринга в соцсети (Telegram, WhatsApp, Twitter)
✅ Список приглашенных пользователей
✅ Информация о заработке с рефералов

### API Endpoints
✅ `/api/user/profile` - получение и обновление профиля
✅ `/api/user/referrals` - получение данных о рефералах

## Возможные проблемы

### Ошибка "User not found"
- Убедитесь, что вы авторизованы
- Проверьте, что в localStorage есть userId
- Проверьте, что пользователь существует в базе данных

### Ошибка подключения к базе данных
- Проверьте переменную DATABASE_URL в файле .env.local
- Убедитесь, что PostgreSQL запущен
- Проверьте правильность данных для подключения

### Реферальная ссылка не работает
- Убедитесь, что поле referral_code заполнено в базе данных
- Проверьте, что скрипт add-profile-fields.sql выполнился успешно

## Дополнительная информация

Если проблемы сохраняются:
1. Откройте консоль браузера (F12) и проверьте ошибки
2. Проверьте логи сервера Next.js
3. Убедитесь, что все зависимости установлены: `npm install`
