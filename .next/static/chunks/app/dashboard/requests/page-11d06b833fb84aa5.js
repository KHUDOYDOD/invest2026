(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6898],{619:function(e,t,a){Promise.resolve().then(a.bind(a,27497))},27497:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var r=a(57437),s=a(2265),n=a(28033),i=a(37064),l=a(77661),o=a(66070),d=a(35974),c=a(62869),u=a(12339),m=a(91723),x=a(41671),h=a(99388),f=a(82431),g=a(79205);let b=(0,g.Z)("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),p=(0,g.Z)("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);var y=a(95252),j=a(88226),v=a(31047),N=a(49322);function w(){let[e,t]=(0,s.useState)([]),[a,g]=(0,s.useState)([]),[w,k]=(0,s.useState)(!0);(0,s.useEffect)(()=>{C()},[]);let C=async()=>{k(!0);let e=localStorage.getItem("authToken"),a=localStorage.getItem("userId");if(e&&a)try{let r=await fetch("/api/user/deposit-requests?userId=".concat(a),{headers:{Authorization:"Bearer ".concat(e)}}),s=await r.json();t(s.requests||[]);let n=await fetch("/api/user/withdrawal-requests?userId=".concat(a),{headers:{Authorization:"Bearer ".concat(e)}}),i=await n.json();g(i.requests||[])}catch(e){console.error("Ошибка загрузки заявок:",e)}k(!1)},Z=e=>{let t={pending:{label:"Ожидает",variant:"secondary",icon:m.Z,color:"text-yellow-600 bg-yellow-100"},approved:{label:"Одобрена",variant:"default",icon:x.Z,color:"text-green-600 bg-green-100"},rejected:{label:"Отклонена",variant:"destructive",icon:h.Z,color:"text-red-600 bg-red-100"},processing:{label:"Обрабатывается",variant:"outline",icon:f.Z,color:"text-blue-600 bg-blue-100"}},a=t[e]||t.pending,s=a.icon;return(0,r.jsxs)(d.C,{className:"".concat(a.color," border-0 font-medium"),children:[(0,r.jsx)(s,{className:"w-3 h-3 mr-1"}),a.label]})},D=e=>{let t=new Date(e);return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)},I=e=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e),M=e=>{let{request:t,type:a}=e;return(0,r.jsxs)(o.Zb,{className:"bg-white/95 backdrop-blur-sm hover:shadow-2xl transition-all duration-200 border-2 border-white/30 hover:border-blue-400/50",children:[(0,r.jsx)(o.Ol,{className:"pb-3 bg-gradient-to-r from-blue-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(o.ll,{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:["deposit"===a?(0,r.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,r.jsx)(b,{className:"w-5 h-5 text-green-600"})}):(0,r.jsx)("div",{className:"p-2 bg-red-100 rounded-full",children:(0,r.jsx)(p,{className:"w-5 h-5 text-red-600"})}),"deposit"===a?"Пополнение":"Вывод средств"]}),Z(t.status)]})}),(0,r.jsxs)(o.aY,{className:"space-y-4 pt-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-r from-green-50 to-emerald-50 p-3 rounded-lg border border-green-200",children:[(0,r.jsx)(y.Z,{className:"w-5 h-5 text-green-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-gray-600 block",children:"Сумма:"}),(0,r.jsx)("span",{className:"font-bold text-xl text-gray-900",children:I(t.amount)})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 p-3 rounded-lg border border-blue-200",children:[(0,r.jsx)(j.Z,{className:"w-5 h-5 text-blue-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-gray-600 block",children:"Способ:"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:t.method})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 p-3 rounded-lg border border-gray-200",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5 text-gray-600"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-xs text-gray-600 block",children:"Создана:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:D(t.createdAt)})]})]}),t.adminComment&&(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-lg p-4 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,r.jsx)(N.Z,{className:"w-5 h-5 text-blue-600"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Комментарий администратора:"}),(0,r.jsx)("p",{className:"text-sm text-blue-800 leading-relaxed",children:t.adminComment})]})]})}),(0,r.jsxs)("div",{className:"text-xs text-gray-600 bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg p-3 border border-gray-200 font-mono",children:[(0,r.jsx)("span",{className:"font-semibold",children:"ID заявки:"})," ",t.id]})]})]})},R=e=>{let{type:t}=e;return(0,r.jsx)(o.Zb,{className:"text-center py-12 bg-white/95 backdrop-blur-sm border-2 border-white/30",children:(0,r.jsx)(o.aY,{children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"p-6 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full",children:"deposit"===t?(0,r.jsx)(b,{className:"w-16 h-16 text-gray-400"}):(0,r.jsx)(p,{className:"w-16 h-16 text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"deposit"===t?"Нет заявок на пополнение":"Нет заявок на вывод"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 text-base",children:"deposit"===t?"Вы еще не создавали заявок на пополнение баланса":"Вы еще не создавали заявок на вывод средств"}),(0,r.jsx)(c.z,{onClick:()=>window.location.href="deposit"===t?"/dashboard/deposit":"/dashboard/withdraw",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold px-6 py-3 text-base shadow-lg hover:shadow-xl transition-all",children:"deposit"===t?"\uD83D\uDCB0 Пополнить баланс":"\uD83D\uDCB8 Вывести средства"})]})]})})})};return(0,r.jsx)(n.a,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:[(0,r.jsx)(i.x,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(l.T,{activeItem:"requests"}),(0,r.jsx)("main",{className:"flex-1 p-6",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"\uD83D\uDCB3 Мои заявки"}),(0,r.jsx)("p",{className:"text-blue-200",children:"Управляйте своими заявками на пополнение и вывод средств"})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)(c.z,{onClick:C,disabled:w,className:"bg-white/95 backdrop-blur-sm border-2 border-white/30 text-gray-800 hover:bg-white hover:shadow-lg font-semibold transition-all",children:[(0,r.jsx)(f.Z,{className:"w-4 h-4 mr-2 ".concat(w?"animate-spin":"")}),"Обновить"]})}),(0,r.jsxs)(u.mQ,{defaultValue:"deposits",className:"space-y-6",children:[(0,r.jsxs)(u.dr,{className:"grid w-full grid-cols-2 bg-white/95 backdrop-blur-sm border-2 border-white/30 p-1 shadow-lg",children:[(0,r.jsxs)(u.SP,{value:"deposits",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-emerald-600 data-[state=active]:text-white text-gray-700 font-semibold data-[state=active]:shadow-lg transition-all",children:[(0,r.jsx)(b,{className:"w-4 h-4 mr-2"}),"Пополнения (",e.length,")"]}),(0,r.jsxs)(u.SP,{value:"withdrawals",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-red-500 data-[state=active]:to-rose-600 data-[state=active]:text-white text-gray-700 font-semibold data-[state=active]:shadow-lg transition-all",children:[(0,r.jsx)(p,{className:"w-4 h-4 mr-2"}),"Выводы (",a.length,")"]})]}),(0,r.jsx)(u.nU,{value:"deposits",className:"space-y-4",children:w?(0,r.jsx)(o.Zb,{className:"bg-white/95 backdrop-blur-sm border-2 border-white/30",children:(0,r.jsxs)(o.aY,{className:"flex items-center justify-center py-12",children:[(0,r.jsx)(f.Z,{className:"w-6 h-6 animate-spin mr-2 text-blue-600"}),(0,r.jsx)("span",{className:"text-gray-800 font-medium",children:"Загрузка заявок..."})]})}):e.length>0?(0,r.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,r.jsx)(M,{request:e,type:"deposit"},e.id))}):(0,r.jsx)(R,{type:"deposit"})}),(0,r.jsx)(u.nU,{value:"withdrawals",className:"space-y-4",children:w?(0,r.jsx)(o.Zb,{className:"bg-white/95 backdrop-blur-sm border-2 border-white/30",children:(0,r.jsxs)(o.aY,{className:"flex items-center justify-center py-12",children:[(0,r.jsx)(f.Z,{className:"w-6 h-6 animate-spin mr-2 text-blue-600"}),(0,r.jsx)("span",{className:"text-gray-800 font-medium",children:"Загрузка заявок..."})]})}):a.length>0?(0,r.jsx)("div",{className:"grid gap-4",children:a.map(e=>(0,r.jsx)(M,{request:e,type:"withdrawal"},e.id))}):(0,r.jsx)(R,{type:"withdrawal"})})]})]})})]})]})})}},28033:function(e,t,a){"use strict";a.d(t,{a:function(){return i}});var r=a(57437),s=a(2265),n=a(99376);function i(e){let{children:t}=e,a=(0,n.useRouter)(),[i,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)(!0),[c,u]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(()=>{try{console.log("AuthGuard: Checking authentication...");let e=localStorage.getItem("userEmail"),t=localStorage.getItem("isAuthenticated"),a=localStorage.getItem("authToken"),r=localStorage.getItem("userId");if(console.log("AuthGuard: Checking auth data",{userEmail:e,isAuth:t,hasToken:!!a,userId:r}),!e||!t||!a||!r){console.log("AuthGuard: Missing auth data, redirecting to login"),u("Необходима авторизация"),d(!1),setTimeout(()=>{window.location.href="/login"},1e3);return}console.log("AuthGuard: User authenticated successfully"),l(!0),u(null)}catch(e){console.error("AuthGuard: Auth check error:",e),u("Ошибка проверки авторизации")}finally{d(!1)}})()},[]),o)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-500 border-r-transparent border-b-blue-500 border-l-transparent rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-white text-lg",children:"Проверка авторизации..."})]})}):c||!i?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,r.jsxs)("div",{className:"text-center space-y-4",children:[(0,r.jsx)("div",{className:"text-red-400 text-xl mb-4",children:c||"Требуется авторизация"}),(0,r.jsx)("button",{onClick:()=>a.push("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Перейти к авторизации"})]})}):(0,r.jsx)(r.Fragment,{children:t})}},66070:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var r=a(57437),s=a(2265),n=a(94508);let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},12339:function(e,t,a){"use strict";a.d(t,{SP:function(){return d},dr:function(){return o},mQ:function(){return l},nU:function(){return c}});var r=a(57437),s=a(2265),n=a(20271),i=a(94508);let l=n.fC,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...s})});o.displayName=n.aV.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...s})});d.displayName=n.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});c.displayName=n.VY.displayName},31047:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},49322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},41671:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},82431:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(79205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},20271:function(e,t,a){"use strict";a.d(t,{VY:function(){return S},aV:function(){return M},fC:function(){return I},xz:function(){return R}});var r=a(2265),s=a(6741),n=a(73966),i=a(1353),l=a(71599),o=a(66840),d=a(29114),c=a(80886),u=a(99255),m=a(57437),x="Tabs",[h,f]=(0,n.b)(x,[i.Pc]),g=(0,i.Pc)(),[b,p]=h(x),y=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,onValueChange:s,defaultValue:n,orientation:i="horizontal",dir:l,activationMode:x="automatic",...h}=e,f=(0,d.gm)(l),[g,p]=(0,c.T)({prop:r,onChange:s,defaultProp:n});return(0,m.jsx)(b,{scope:a,baseId:(0,u.M)(),value:g,onValueChange:p,orientation:i,dir:f,activationMode:x,children:(0,m.jsx)(o.WV.div,{dir:f,"data-orientation":i,...h,ref:t})})});y.displayName=x;var j="TabsList",v=r.forwardRef((e,t)=>{let{__scopeTabs:a,loop:r=!0,...s}=e,n=p(j,a),l=g(a);return(0,m.jsx)(i.fC,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:r,children:(0,m.jsx)(o.WV.div,{role:"tablist","aria-orientation":n.orientation,...s,ref:t})})});v.displayName=j;var N="TabsTrigger",w=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:r,disabled:n=!1,...l}=e,d=p(N,a),c=g(a),u=Z(d.baseId,r),x=D(d.baseId,r),h=r===d.value;return(0,m.jsx)(i.ck,{asChild:!0,...c,focusable:!n,active:h,children:(0,m.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":x,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:u,...l,ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(r)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(r)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||n||!e||d.onValueChange(r)})})})});w.displayName=N;var k="TabsContent",C=r.forwardRef((e,t)=>{let{__scopeTabs:a,value:s,forceMount:n,children:i,...d}=e,c=p(k,a),u=Z(c.baseId,s),x=D(c.baseId,s),h=s===c.value,f=r.useRef(h);return r.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,m.jsx)(l.z,{present:n||h,children:a=>{let{present:r}=a;return(0,m.jsx)(o.WV.div,{"data-state":h?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:x,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&i})}})});function Z(e,t){return"".concat(e,"-trigger-").concat(t)}function D(e,t){return"".concat(e,"-content-").concat(t)}C.displayName=k;var I=y,M=v,R=w,S=C}},function(e){e.O(0,[9203,3513,282,2696,8239,4438,9390,8391,6210,1133,8631,2971,2117,1744],function(){return e(e.s=619)}),_N_E=e.O()}]);