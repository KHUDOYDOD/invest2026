(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1258],{34432:function(e,t,r){Promise.resolve().then(r.bind(r,20731))},20731:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(57437),s=r(28033),l=r(37064),i=r(77661),n=r(62869),o=r(35974),c=r(12339),d=r(95252),u=r(70525),x=r(95805),h=r(87414),m=r(49322),b=r(92934),f=r(94766),p=r(18930),g=r(91723),v=r(98728),w=r(2265),j=r(14438);function N(){let[e,t]=(0,w.useState)([]),[r,s]=(0,w.useState)({total:"0",unread:"0",read:"0"}),[N,y]=(0,w.useState)(!0),[k,C]=(0,w.useState)({email_notifications:!0,push_notifications:!0,sms_notifications:!1,deposit_notifications:!0,withdrawal_notifications:!0,referral_notifications:!0,system_notifications:!0,marketing_notifications:!1});(0,w.useEffect)(()=>{D(),A()},[]);let D=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";try{let r=localStorage.getItem("userId");if(!r){j.Am.error("Пользователь не авторизован");return}let a=await fetch("/api/notifications?type=".concat(e),{headers:{"x-user-id":r}}),l=await a.json();l.success?(t(l.notifications),s(l.stats)):j.Am.error(l.error||"Ошибка при загрузке уведомлений")}catch(e){console.error("Error fetching notifications:",e),j.Am.error("Ошибка при загрузке уведомлений")}finally{y(!1)}},A=async()=>{try{let e=localStorage.getItem("userId");if(!e)return;let t=await fetch("/api/notifications/preferences",{headers:{"x-user-id":e}}),r=await t.json();r.success&&C(r.preferences)}catch(e){console.error("Error fetching preferences:",e)}},S=async()=>{try{let e=localStorage.getItem("userId");if(!e)return;let t=await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":e},body:JSON.stringify({markAllAsRead:!0})}),r=await t.json();r.success?(j.Am.success("Все уведомления отмечены как прочитанные"),D()):j.Am.error(r.error||"Ошибка при обновлении")}catch(e){console.error("Error marking all as read:",e),j.Am.error("Ошибка при обновлении уведомлений")}},Z=async()=>{try{let e=localStorage.getItem("userId");if(!e)return;let t=await fetch("/api/notifications?all=true",{method:"DELETE",headers:{"x-user-id":e}}),r=await t.json();r.success?(j.Am.success("Все уведомления удалены"),D()):j.Am.error(r.error||"Ошибка при удалении")}catch(e){console.error("Error deleting all notifications:",e),j.Am.error("Ошибка при удалении уведомлений")}},I=async e=>{try{let t=localStorage.getItem("userId");if(!t)return;let r=await fetch("/api/notifications",{method:"PATCH",headers:{"Content-Type":"application/json","x-user-id":t},body:JSON.stringify({notificationId:e})});(await r.json()).success&&D()}catch(e){console.error("Error marking as read:",e)}},z=async e=>{try{let t=localStorage.getItem("userId");if(!t)return;let r=await fetch("/api/notifications?id=".concat(e),{method:"DELETE",headers:{"x-user-id":t}}),a=await r.json();a.success?(j.Am.success("Уведомление удалено"),D()):j.Am.error(a.error||"Ошибка при удалении")}catch(e){console.error("Error deleting notification:",e),j.Am.error("Ошибка при удалении уведомления")}},_=async()=>{try{let e=localStorage.getItem("userId");if(!e)return;let t=await fetch("/api/notifications/preferences",{method:"PUT",headers:{"Content-Type":"application/json","x-user-id":e},body:JSON.stringify(k)}),r=await t.json();r.success?j.Am.success("Настройки сохранены"):j.Am.error(r.error||"Ошибка при сохранении")}catch(e){console.error("Error saving preferences:",e),j.Am.error("Ошибка при сохранении настроек")}},E=e=>{let t=new Date(e),r=new Date().getTime()-t.getTime(),a=Math.floor(r/6e4),s=Math.floor(r/36e5),l=Math.floor(r/864e5);return a<60?"".concat(a," минут назад"):s<24?"".concat(s," часов назад"):l<7?"".concat(l," дней назад"):t.toLocaleDateString("ru-RU")},T=e=>({DollarSign:d.Z,TrendingUp:u.Z,Users:x.Z,Gift:h.Z,AlertCircle:m.Z,CheckCircle2:b.Z,Bell:f.Z})[e]||f.Z,M=parseInt(r.unread);return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse delay-1000"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 w-96 h-96 bg-green-500/5 rounded-full blur-3xl animate-pulse delay-2000"})]}),(0,a.jsx)(l.x,{}),(0,a.jsxs)("div",{className:"flex relative z-10",children:[(0,a.jsx)(i.T,{activeItem:"notifications"}),(0,a.jsx)("main",{className:"flex-1 p-4 md:p-6",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"relative bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20 backdrop-blur-2xl rounded-3xl p-8 border-2 border-white/20 shadow-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-40 h-40 bg-blue-500/30 rounded-full blur-3xl animate-pulse"}),(0,a.jsx)("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-purple-500/30 rounded-full blur-3xl animate-pulse delay-1000"}),(0,a.jsxs)("div",{className:"relative z-10 text-center space-y-4",children:[(0,a.jsxs)("div",{className:"inline-flex items-center space-x-3 bg-gradient-to-r from-blue-500/20 to-purple-500/20 backdrop-blur-xl rounded-full px-6 py-3 border-2 border-blue-400/30 shadow-lg mb-4",children:[(0,a.jsx)(f.Z,{className:"h-6 w-6 text-blue-400 animate-pulse"}),(0,a.jsx)("span",{className:"text-white font-bold text-lg",children:"Центр уведомлений"}),M>0&&(0,a.jsxs)(o.C,{className:"bg-red-500 text-white",children:[M," новых"]})]}),(0,a.jsx)("h1",{className:"text-5xl md:text-7xl font-black bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 bg-clip-text text-transparent mb-4",children:"\uD83D\uDD14 Уведомления"}),(0,a.jsx)("p",{className:"text-blue-100 max-w-2xl mx-auto text-xl font-medium",children:"Будьте в курсе всех важных событий и обновлений"}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-4 pt-4",children:[(0,a.jsxs)(n.z,{onClick:S,disabled:0===M,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white disabled:opacity-50",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Отметить все прочитанными"]}),(0,a.jsxs)(n.z,{onClick:Z,disabled:0===e.length,variant:"outline",className:"border-white/20 text-white hover:bg-white/10 disabled:opacity-50",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Очистить все"]})]})]})]}),(0,a.jsxs)(c.mQ,{defaultValue:"all",className:"w-full",children:[(0,a.jsxs)(c.dr,{className:"grid grid-cols-5 w-full max-w-3xl mx-auto bg-white/10 backdrop-blur-xl border-2 border-white/20 rounded-xl p-1",children:[(0,a.jsx)(c.SP,{value:"all",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 text-white rounded-lg",children:"Все"}),(0,a.jsx)(c.SP,{value:"unread",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 text-white rounded-lg",children:"Непрочитанные"}),(0,a.jsx)(c.SP,{value:"transactions",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 text-white rounded-lg",children:"Транзакции"}),(0,a.jsx)(c.SP,{value:"system",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 text-white rounded-lg",children:"Системные"}),(0,a.jsx)(c.SP,{value:"settings",className:"data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-purple-600 text-white rounded-lg",children:"Настройки"})]}),(0,a.jsx)(c.nU,{value:"all",className:"space-y-4 mt-6",children:N?(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("div",{className:"text-white text-xl",children:"Загрузка уведомлений..."})}):0===e.length?(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-purple-600/20 backdrop-blur-2xl rounded-3xl p-12 border-2 border-white/20 shadow-xl text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD14"}),(0,a.jsx)("h3",{className:"text-white font-bold text-2xl mb-2",children:"Нет уведомлений"}),(0,a.jsx)("p",{className:"text-white/70 text-lg",children:"У вас пока нет уведомлений"})]}):e.map(e=>{let t=T(e.icon);return(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20 backdrop-blur-2xl rounded-2xl p-6 border-2 border-white/20 shadow-xl hover:scale-[1.02] transition-all cursor-pointer overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/20 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),!e.is_read&&(0,a.jsx)("div",{className:"absolute top-4 right-4 w-3 h-3 bg-red-500 rounded-full animate-pulse shadow-lg shadow-red-500/50"}),(0,a.jsxs)("div",{className:"relative z-10 flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"p-4 bg-gradient-to-r ".concat(e.color," rounded-2xl shadow-lg flex-shrink-0"),children:(0,a.jsx)(t,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-bold text-xl",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-white/60 text-sm ml-4",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:E(e.created_at)})]})]}),(0,a.jsx)("p",{className:"text-white/80 text-base leading-relaxed mb-4",children:e.message}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[!e.is_read&&(0,a.jsxs)(n.z,{onClick:()=>I(e.id),size:"sm",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Отметить прочитанным"]}),(0,a.jsxs)(n.z,{onClick:()=>z(e.id),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Удалить"]})]})]})]})]},e.id)})}),(0,a.jsx)(c.nU,{value:"unread",className:"space-y-4 mt-6",children:e.filter(e=>!e.is_read).length>0?e.filter(e=>!e.is_read).map(e=>{let t=T(e.icon);return(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20 backdrop-blur-2xl rounded-2xl p-6 border-2 border-white/20 shadow-xl hover:scale-[1.02] transition-all cursor-pointer overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/20 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),(0,a.jsx)("div",{className:"absolute top-4 right-4 w-3 h-3 bg-red-500 rounded-full animate-pulse shadow-lg shadow-red-500/50"}),(0,a.jsxs)("div",{className:"relative z-10 flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"p-4 bg-gradient-to-r ".concat(e.color," rounded-2xl shadow-lg flex-shrink-0"),children:(0,a.jsx)(t,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-white font-bold text-xl",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-white/60 text-sm ml-4",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:E(e.created_at)})]})]}),(0,a.jsx)("p",{className:"text-white/80 text-base leading-relaxed mb-4",children:e.message}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)(n.z,{onClick:()=>I(e.id),size:"sm",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Отметить прочитанным"]}),(0,a.jsxs)(n.z,{onClick:()=>z(e.id),size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Удалить"]})]})]})]})]},e.id)}):(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-purple-600/20 backdrop-blur-2xl rounded-3xl p-12 border-2 border-white/20 shadow-xl text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,a.jsx)("h3",{className:"text-white font-bold text-2xl mb-2",children:"Все уведомления прочитаны"}),(0,a.jsx)("p",{className:"text-white/70 text-lg",children:"У вас нет непрочитанных уведомлений"})]})}),(0,a.jsx)(c.nU,{value:"transactions",className:"space-y-4 mt-6",children:(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-purple-600/20 backdrop-blur-2xl rounded-3xl p-12 border-2 border-white/20 shadow-xl text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCB0"}),(0,a.jsx)("h3",{className:"text-white font-bold text-2xl mb-2",children:"Уведомления о транзакциях"}),(0,a.jsx)("p",{className:"text-white/70 text-lg",children:"Здесь будут отображаться уведомления о ваших транзакциях"})]})}),(0,a.jsx)(c.nU,{value:"system",className:"space-y-4 mt-6",children:(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-purple-600/20 backdrop-blur-2xl rounded-3xl p-12 border-2 border-white/20 shadow-xl text-center",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"⚙️"}),(0,a.jsx)("h3",{className:"text-white font-bold text-2xl mb-2",children:"Системные уведомления"}),(0,a.jsx)("p",{className:"text-white/70 text-lg",children:"Здесь будут отображаться системные уведомления"})]})}),(0,a.jsx)(c.nU,{value:"settings",className:"space-y-6 mt-6",children:(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 via-purple-600/20 to-pink-600/20 backdrop-blur-2xl rounded-3xl p-8 border-2 border-white/20 shadow-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-500/20 rounded-full blur-3xl animate-pulse"}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,a.jsx)("div",{className:"p-4 bg-gradient-to-br from-blue-500/30 to-purple-500/30 rounded-2xl shadow-lg border border-white/20",children:(0,a.jsx)(v.Z,{className:"h-8 w-8 text-blue-300 animate-pulse"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-black text-white mb-1",children:"⚙️ Настройки уведомлений"}),(0,a.jsx)("p",{className:"text-blue-200 text-base",children:"Управляйте типами уведомлений"})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:[{key:"deposit_notifications",title:"Уведомления о депозитах",description:"Получать уведомления при пополнении счета"},{key:"withdrawal_notifications",title:"Уведомления о выводах",description:"Получать уведомления при выводе средств"},{key:"referral_notifications",title:"Уведомления о рефералах",description:"Получать уведомления о новых рефералах"},{key:"system_notifications",title:"Системные уведомления",description:"Получать важные системные сообщения"},{key:"email_notifications",title:"Email уведомления",description:"Дублировать уведомления на email"},{key:"push_notifications",title:"Push уведомления",description:"Получать push-уведомления в браузере"}].map(e=>(0,a.jsx)("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/10 hover:bg-white/10 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-white font-bold text-lg mb-1",children:e.title}),(0,a.jsx)("p",{className:"text-white/60 text-sm",children:e.description})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:k[e.key],onChange:t=>C({...k,[e.key]:t.target.checked}),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-14 h-7 bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-blue-600 peer-checked:to-purple-600"})]})]})},e.key))}),(0,a.jsx)(n.z,{onClick:_,className:"w-full mt-6 bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 hover:from-blue-700 hover:via-purple-700 hover:to-pink-700 text-white font-bold text-lg py-6 rounded-xl shadow-2xl hover:scale-105 transition-all",children:"Сохранить настройки"})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-blue-600/20 to-cyan-600/20 backdrop-blur-xl rounded-2xl p-6 border-2 border-white/20 shadow-xl hover:scale-105 transition-all overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-blue-500/30 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),(0,a.jsxs)("div",{className:"relative z-10 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCEC"}),(0,a.jsx)("h3",{className:"text-white font-bold text-3xl mb-2",children:r.total}),(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Всего уведомлений"})]})]}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-red-600/20 to-pink-600/20 backdrop-blur-xl rounded-2xl p-6 border-2 border-white/20 shadow-xl hover:scale-105 transition-all overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-red-500/30 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),(0,a.jsxs)("div",{className:"relative z-10 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDD34"}),(0,a.jsx)("h3",{className:"text-white font-bold text-3xl mb-2",children:r.unread}),(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Непрочитанных"})]})]}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-green-600/20 to-emerald-600/20 backdrop-blur-xl rounded-2xl p-6 border-2 border-white/20 shadow-xl hover:scale-105 transition-all overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-green-500/30 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),(0,a.jsxs)("div",{className:"relative z-10 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"✅"}),(0,a.jsx)("h3",{className:"text-white font-bold text-3xl mb-2",children:r.read}),(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Прочитанных"})]})]}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-purple-600/20 to-pink-600/20 backdrop-blur-xl rounded-2xl p-6 border-2 border-white/20 shadow-xl hover:scale-105 transition-all overflow-hidden group",children:[(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-purple-500/30 rounded-full blur-2xl group-hover:scale-150 transition-transform duration-700"}),(0,a.jsxs)("div",{className:"relative z-10 text-center",children:[(0,a.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCC5"}),(0,a.jsx)("h3",{className:"text-white font-bold text-3xl mb-2",children:"Сегодня"}),(0,a.jsx)("p",{className:"text-white/70 text-sm",children:"Последнее обновление"})]})]})]})]})})]})]})}function y(){return(0,a.jsx)(s.a,{children:(0,a.jsx)(N,{})})}},28033:function(e,t,r){"use strict";r.d(t,{a:function(){return i}});var a=r(57437),s=r(2265),l=r(99376);function i(e){let{children:t}=e,r=(0,l.useRouter)(),[i,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null);return((0,s.useEffect)(()=>{(()=>{try{console.log("AuthGuard: Checking authentication...");let e=localStorage.getItem("userEmail"),t=localStorage.getItem("isAuthenticated"),r=localStorage.getItem("authToken"),a=localStorage.getItem("userId");if(console.log("AuthGuard: Checking auth data",{userEmail:e,isAuth:t,hasToken:!!r,userId:a}),!e||!t||!r||!a){console.log("AuthGuard: Missing auth data, redirecting to login"),u("Необходима авторизация"),c(!1),setTimeout(()=>{window.location.href="/login"},1e3);return}console.log("AuthGuard: User authenticated successfully"),n(!0),u(null)}catch(e){console.error("AuthGuard: Auth check error:",e),u("Ошибка проверки авторизации")}finally{c(!1)}})()},[]),o)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-500 border-r-transparent border-b-blue-500 border-l-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white text-lg",children:"Проверка авторизации..."})]})}):d||!i?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-red-400 text-xl mb-4",children:d||"Требуется авторизация"}),(0,a.jsx)("button",{onClick:()=>r.push("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Перейти к авторизации"})]})}):(0,a.jsx)(a.Fragment,{children:t})}},12339:function(e,t,r){"use strict";r.d(t,{SP:function(){return c},dr:function(){return o},mQ:function(){return n},nU:function(){return d}});var a=r(57437),s=r(2265),l=r(20271),i=r(94508);let n=l.fC,o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...s})});o.displayName=l.aV.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...s})});c.displayName=l.xz.displayName;let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});d.displayName=l.VY.displayName},49322:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},92934:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},95252:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},87414:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},18930:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},20271:function(e,t,r){"use strict";r.d(t,{VY:function(){return z},aV:function(){return Z},fC:function(){return S},xz:function(){return I}});var a=r(2265),s=r(6741),l=r(73966),i=r(1353),n=r(71599),o=r(66840),c=r(29114),d=r(80886),u=r(99255),x=r(57437),h="Tabs",[m,b]=(0,l.b)(h,[i.Pc]),f=(0,i.Pc)(),[p,g]=m(h),v=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:s,defaultValue:l,orientation:i="horizontal",dir:n,activationMode:h="automatic",...m}=e,b=(0,c.gm)(n),[f,g]=(0,d.T)({prop:a,onChange:s,defaultProp:l});return(0,x.jsx)(p,{scope:r,baseId:(0,u.M)(),value:f,onValueChange:g,orientation:i,dir:b,activationMode:h,children:(0,x.jsx)(o.WV.div,{dir:b,"data-orientation":i,...m,ref:t})})});v.displayName=h;var w="TabsList",j=a.forwardRef((e,t)=>{let{__scopeTabs:r,loop:a=!0,...s}=e,l=g(w,r),n=f(r);return(0,x.jsx)(i.fC,{asChild:!0,...n,orientation:l.orientation,dir:l.dir,loop:a,children:(0,x.jsx)(o.WV.div,{role:"tablist","aria-orientation":l.orientation,...s,ref:t})})});j.displayName=w;var N="TabsTrigger",y=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,disabled:l=!1,...n}=e,c=g(N,r),d=f(r),u=D(c.baseId,a),h=A(c.baseId,a),m=a===c.value;return(0,x.jsx)(i.ck,{asChild:!0,...d,focusable:!l,active:m,children:(0,x.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":h,"data-state":m?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...n,ref:t,onMouseDown:(0,s.M)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,s.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,s.M)(e.onFocus,()=>{let e="manual"!==c.activationMode;m||l||!e||c.onValueChange(a)})})})});y.displayName=N;var k="TabsContent",C=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:s,forceMount:l,children:i,...c}=e,d=g(k,r),u=D(d.baseId,s),h=A(d.baseId,s),m=s===d.value,b=a.useRef(m);return a.useEffect(()=>{let e=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(n.z,{present:l||m,children:r=>{let{present:a}=r;return(0,x.jsx)(o.WV.div,{"data-state":m?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!a,id:h,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:b.current?"0s":void 0},children:a&&i})}})});function D(e,t){return"".concat(e,"-trigger-").concat(t)}function A(e,t){return"".concat(e,"-content-").concat(t)}C.displayName=k;var S=v,Z=j,I=y,z=C}},function(e){e.O(0,[9203,3513,282,2696,8239,4438,9390,8391,6210,1133,8631,2971,2117,1744],function(){return e(e.s=34432)}),_N_E=e.O()}]);