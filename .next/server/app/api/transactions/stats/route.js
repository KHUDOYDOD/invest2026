"use strict";(()=>{var t={};t.id=9300,t.ids=[9300],t.modules={20399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:t=>{t.exports=import("pg")},81729:(t,a,e)=>{e.a(t,async(t,s)=>{try{e.r(a),e.d(a,{originalPathname:()=>h,patchFetch:()=>c,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>E,staticGenerationAsyncStorage:()=>d});var r=e(73278),o=e(45002),n=e(54877),i=e(14501),p=t([i]);i=(p.then?(await p)():p)[0];let l=new r.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/transactions/stats/route",pathname:"/api/transactions/stats",filename:"route",bundlePath:"app/api/transactions/stats/route"},resolvedPagePath:"C:\\Users\\x4539\\Downloads\\Invest2025-main\\Invest2025-main\\app\\api\\transactions\\stats\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:E}=l,h="/api/transactions/stats/route";function c(){return(0,n.patchFetch)({serverHooks:E,staticGenerationAsyncStorage:d})}s()}catch(t){s(t)}})},14501:(t,a,e)=>{e.a(t,async(t,s)=>{try{e.r(a),e.d(a,{GET:()=>i});var r=e(71309),o=e(64985),n=t([o]);async function i(t){try{let a=t.nextUrl.searchParams.get("userId");if(!a)return r.NextResponse.json({error:"User ID is required"},{status:400});let e=(await (0,o.I)(`SELECT 
        COUNT(*) as total_transactions,
        SUM(CASE WHEN type = 'deposit' THEN amount ELSE 0 END) as total_deposits,
        SUM(CASE WHEN type = 'withdrawal' THEN amount ELSE 0 END) as total_withdrawals,
        SUM(CASE WHEN type = 'profit' THEN amount ELSE 0 END) as total_profit
      FROM transactions 
      WHERE user_id = $1`,[a])).rows[0];return r.NextResponse.json({totalTransactions:parseInt(e.total_transactions)||0,totalDeposits:parseFloat(e.total_deposits)||0,totalWithdrawals:parseFloat(e.total_withdrawals)||0,totalProfit:parseFloat(e.total_profit)||0})}catch(t){return console.error("Error fetching transaction stats:",t),r.NextResponse.json({error:"Failed to fetch transaction stats"},{status:500})}}o=(n.then?(await n)():n)[0],s()}catch(t){s(t)}})},64985:(t,a,e)=>{e.a(t,async(t,s)=>{try{e.d(a,{I:()=>n,d:()=>p});var r=e(8678),o=t([r]);r=(o.then?(await o)():o)[0];let i=process.env.POSTGRES_URL_NON_POOLING||process.env.DATABASE_URL||process.env.POSTGRES_URL;if(!i)throw Error("DATABASE_URL, POSTGRES_URL, or POSTGRES_URL_NON_POOLING must be set. Did you forget to provision a database?");let p=new r.Pool({connectionString:i,ssl:!!i?.includes("sslmode=require")&&{rejectUnauthorized:!1}});async function n(t,a){let e=await p.connect();try{return await e.query(t,a)}finally{e.release()}}s()}catch(t){s(t)}})}};var a=require("../../../../webpack-runtime.js");a.C(t);var e=t=>a(a.s=t),s=a.X(0,[7787,4833],()=>e(81729));module.exports=s})();