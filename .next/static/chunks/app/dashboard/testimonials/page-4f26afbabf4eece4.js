(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5053],{33617:function(e,t,r){Promise.resolve().then(r.bind(r,54681))},54681:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(57437),a=r(2265),l=r(28033),n=r(37064),i=r(77661),c=r(66070),o=r(62869),d=r(95186),u=r(26815),m=r(76818),x=r(41671),h=r(99388),f=r(91723),p=r(53417),b=r(86595),g=r(44743),j=r(61433);function w(){let{user:e}=(0,j.a)(),[t,r]=(0,a.useState)(5),[l,w]=(0,a.useState)(""),[N,v]=(0,a.useState)(""),[y,k]=(0,a.useState)(!1),[S,Z]=(0,a.useState)(""),[C,I]=(0,a.useState)([]),[A,E]=(0,a.useState)(!0);(0,a.useEffect)(()=>{T()},[]);let T=async()=>{try{let e=localStorage.getItem("authToken");if(!e)return;let t=await fetch("/api/user/testimonials",{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();e.success&&I(e.testimonials)}}catch(e){console.error("Error loading user testimonials:",e)}finally{E(!1)}},z=async e=>{if(e.preventDefault(),!l.trim()||!N.trim()){Z("Пожалуйста, заполните все поля");return}if(N.length>1e3){Z("Отзыв слишком длинный (максимум 1000 символов)");return}k(!0),Z("");try{let e=localStorage.getItem("authToken");if(!e){Z("Необходимо войти в систему");return}let s=await fetch("/api/testimonials/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({rating:t,title:l.trim(),content:N.trim()})}),a=await s.json();a.success?(Z("Отзыв отправлен на модерацию. Спасибо!"),w(""),v(""),r(5),T()):Z(a.error||"Произошла ошибка при отправке отзыва")}catch(e){Z("Произошла ошибка при отправке отзыва")}finally{k(!1)}},R=e=>{switch(e){case"approved":return(0,s.jsx)(x.Z,{className:"h-5 w-5 text-green-400"});case"rejected":return(0,s.jsx)(h.Z,{className:"h-5 w-5 text-red-400"});default:return(0,s.jsx)(f.Z,{className:"h-5 w-5 text-yellow-400"})}},_=e=>{switch(e){case"approved":return"Одобрен";case"rejected":return"Отклонен";default:return"На модерации"}},F=e=>{switch(e){case"approved":return"text-green-400 bg-green-500/20 border-green-500/30";case"rejected":return"text-red-400 bg-red-500/20 border-red-500/30";default:return"text-yellow-400 bg-yellow-500/20 border-yellow-500/30"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-indigo-900 relative overflow-hidden",children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl animate-pulse"}),(0,s.jsx)("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),(0,s.jsx)(n.x,{}),(0,s.jsxs)("div",{className:"flex relative z-10",children:[(0,s.jsx)(i.T,{activeItem:"testimonials"}),(0,s.jsx)("main",{className:"flex-1 p-4 md:p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("div",{className:"inline-flex items-center px-6 py-3 rounded-full bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-purple-500/30 mb-6 backdrop-blur-sm",children:[(0,s.jsx)(p.Z,{className:"h-5 w-5 mr-3 text-purple-400"}),(0,s.jsx)("span",{className:"text-purple-300 font-medium",children:"Отзывы"})]}),(0,s.jsx)("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-purple-400 via-blue-400 to-cyan-400 bg-clip-text text-transparent mb-4",children:"⭐ Ваши отзывы"}),(0,s.jsx)("p",{className:"text-white/80 max-w-2xl mx-auto",children:"Поделитесь своим опытом использования нашей платформы. Все отзывы проходят модерацию перед публикацией"})]}),(0,s.jsxs)(c.Zb,{className:"bg-white/10 backdrop-blur-xl border-white/20 shadow-2xl",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)(c.ll,{className:"text-white flex items-center gap-3",children:[(0,s.jsx)(b.Z,{className:"h-6 w-6 text-yellow-400"}),"Написать отзыв"]}),(0,s.jsx)(c.SZ,{className:"text-white/70",children:"Расскажите о своем опыте работы с нашей платформой"})]}),(0,s.jsx)(c.aY,{children:(0,s.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-white font-medium",children:"Оценка"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>r(e),className:"transition-colors",children:(0,s.jsx)(b.Z,{className:"h-8 w-8 ".concat(e<=t?"text-yellow-400 fill-yellow-400":"text-gray-400 hover:text-yellow-300")})},e)),(0,s.jsxs)("span",{className:"ml-3 text-white/80",children:[t," из 5 звезд"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"title",className:"text-white font-medium",children:"Заголовок отзыва"}),(0,s.jsx)(d.I,{id:"title",value:l,onChange:e=>w(e.target.value),placeholder:"Краткое описание вашего опыта",maxLength:200,className:"bg-white/10 border-white/20 text-white placeholder:text-white/50"}),(0,s.jsxs)("div",{className:"text-right text-sm text-white/60",children:[l.length,"/200"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"content",className:"text-white font-medium",children:"Текст отзыва"}),(0,s.jsx)(m.g,{id:"content",value:N,onChange:e=>v(e.target.value),placeholder:"Расскажите подробнее о своем опыте использования платформы...",rows:6,maxLength:1e3,className:"bg-white/10 border-white/20 text-white placeholder:text-white/50 resize-none"}),(0,s.jsxs)("div",{className:"text-right text-sm text-white/60",children:[N.length,"/1000"]})]}),S&&(0,s.jsx)("div",{className:"p-4 rounded-lg ".concat(S.includes("Спасибо")?"bg-green-500/20 border border-green-500/30 text-green-400":"bg-red-500/20 border border-red-500/30 text-red-400"),children:S}),(0,s.jsx)(o.z,{type:"submit",disabled:y||!l.trim()||!N.trim(),className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-bold py-3 disabled:opacity-50",children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Отправляем..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{className:"h-5 w-5 mr-2"}),"Отправить отзыв"]})})]})})]}),(0,s.jsxs)(c.Zb,{className:"bg-white/10 backdrop-blur-xl border-white/20 shadow-2xl",children:[(0,s.jsxs)(c.Ol,{children:[(0,s.jsxs)(c.ll,{className:"text-white flex items-center gap-3",children:[(0,s.jsx)(p.Z,{className:"h-6 w-6 text-blue-400"}),"Ваши отзывы"]}),(0,s.jsx)(c.SZ,{className:"text-white/70",children:"История ваших отзывов и их статус модерации"})]}),(0,s.jsx)(c.aY,{children:A?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-400 mx-auto"}),(0,s.jsx)("p",{className:"text-white/60 mt-4",children:"Загрузка отзывов..."})]}):0===C.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(p.Z,{className:"h-12 w-12 text-white/40 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white/60",children:"У вас пока нет отзывов"})]}):(0,s.jsx)("div",{className:"space-y-4",children:C.map(e=>(0,s.jsxs)("div",{className:"bg-white/5 rounded-xl p-6 border border-white/10",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center",children:[void 0,void 0,void 0,void 0,void 0].map((t,r)=>(0,s.jsx)(b.Z,{className:"h-4 w-4 ".concat(r<e.rating?"text-yellow-400 fill-yellow-400":"text-gray-400")},r))}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full border ".concat(F(e.status)),children:[R(e.status),(0,s.jsx)("span",{className:"text-sm font-medium",children:_(e.status)})]})]}),(0,s.jsx)("span",{className:"text-white/60 text-sm",children:new Date(e.createdAt).toLocaleDateString("ru-RU")})]}),(0,s.jsx)("h3",{className:"text-white font-bold text-lg mb-2",children:e.title}),(0,s.jsx)("p",{className:"text-white/80 mb-4",children:e.content}),e.adminComment&&(0,s.jsxs)("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-blue-300 text-sm font-medium mb-1",children:"Комментарий модератора:"}),(0,s.jsx)("p",{className:"text-blue-200 text-sm",children:e.adminComment})]})]},e.id))})})]})]})})]})]})}function N(){return(0,s.jsx)(l.a,{children:(0,s.jsx)(w,{})})}},28033:function(e,t,r){"use strict";r.d(t,{a:function(){return n}});var s=r(57437),a=r(2265),l=r(99376);function n(e){let{children:t}=e,r=(0,l.useRouter)(),[n,i]=(0,a.useState)(!1),[c,o]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(()=>{try{console.log("AuthGuard: Checking authentication...");let e=localStorage.getItem("userEmail"),t=localStorage.getItem("isAuthenticated"),r=localStorage.getItem("authToken"),s=localStorage.getItem("userId");if(console.log("AuthGuard: Checking auth data",{userEmail:e,isAuth:t,hasToken:!!r,userId:s}),!e||!t||!r||!s){console.log("AuthGuard: Missing auth data, redirecting to login"),u("Необходима авторизация"),o(!1),setTimeout(()=>{window.location.href="/login"},1e3);return}console.log("AuthGuard: User authenticated successfully"),i(!0),u(null)}catch(e){console.error("AuthGuard: Auth check error:",e),u("Ошибка проверки авторизации")}finally{o(!1)}})()},[]),c)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 border-4 border-t-blue-500 border-r-transparent border-b-blue-500 border-l-transparent rounded-full animate-spin mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-white text-lg",children:"Проверка авторизации..."})]})}):d||!n?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"text-red-400 text-xl mb-4",children:d||"Требуется авторизация"}),(0,s.jsx)("button",{onClick:()=>r.push("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Перейти к авторизации"})]})}):(0,s.jsx)(s.Fragment,{children:t})}},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return n},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=r(57437),a=r(2265),l=r(94508);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},26815:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var s=r(57437),a=r(2265),l=r(6394),n=r(90535),i=r(94508);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.f,{ref:t,className:(0,i.cn)(c(),r),...a})});o.displayName=l.f.displayName},76818:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var s=r(57437),a=r(2265),l=r(94508);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});n.displayName="Textarea"},61433:function(e,t,r){"use strict";r.d(t,{UserProvider:function(){return n},a:function(){return i}});var s=r(57437),a=r(2265);let l=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,a.useState)(null),[i,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),u=async()=>{try{c(!0),d(null);let e=localStorage.getItem("authToken"),t=localStorage.getItem("userId");if(!e||!t){n(null);return}let r=await fetch("/api/dashboard/all?userId=".concat(t),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!r.ok){if(401===r.status){localStorage.clear(),window.location.href="/login";return}throw Error("Failed to fetch user data")}let s=await r.json();n(s.user)}catch(e){console.error("Error loading user:",e),d(e instanceof Error?e.message:"Failed to load user")}finally{c(!1)}};return(0,a.useEffect)(()=>{u()},[]),(0,s.jsx)(l.Provider,{value:{user:r,loading:i,error:o,refreshUser:u,updateBalance:e=>{r&&n({...r,balance:e})}},children:t})}function i(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useUser must be used within a UserProvider");return e}},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},99388:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91723:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},44743:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},86595:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},6394:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var s=r(2265),a=r(66840),l=r(57437),n=s.forwardRef((e,t)=>(0,l.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var i=n}},function(e){e.O(0,[9203,3513,282,2696,8239,4438,9390,8391,6210,1133,8631,2971,2117,1744],function(){return e(e.s=33617)}),_N_E=e.O()}]);