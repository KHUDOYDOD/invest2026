@echo off
chcp 65001 >nul
echo ========================================
echo üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ê–ô–¢–ê –ù–ê –ù–û–í–û–ú VPS
echo ========================================
echo.

cd C:\Users\x4539\Downloads\Invest2025-main\Invest2025-main

echo [1/4] –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ...
call npm run build

if errorlevel 1 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ!
    pause
    exit /b 1
)

echo.
echo [2/4] –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π .next –Ω–∞ VPS...
echo –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: $X11021997x$
ssh root11@45.155.205.43 "rm -rf /root/invest2026/.next"

echo.
echo [3/4] –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π .next –Ω–∞ VPS...
echo –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: $X11021997x$
scp -r .next root11@45.155.205.43:/root/invest2026/

if errorlevel 1 (
    echo.
    echo ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏!
    pause
    exit /b 1
)

echo.
echo [4/4] –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...
echo –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: $X11021997x$
ssh root11@45.155.205.43 "cd /root/invest2026 && pm2 restart investpro"

echo.
echo –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã...
timeout /t 3 /nobreak >nul

echo.
echo –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞...
echo –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: $X11021997x$
ssh root11@45.155.205.43 "pm2 status"

echo.
echo ========================================
echo ‚úÖ –ì–û–¢–û–í–û! –°–∞–π—Ç –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ –Ω–æ–≤–æ–º VPS
echo ========================================
echo.
echo üåê –û—Ç–∫—Ä–æ–π—Ç–µ: http://45.155.205.43
echo üë§ –ê–¥–º–∏–Ω: http://45.155.205.43/admin/dashboard
echo.
pause